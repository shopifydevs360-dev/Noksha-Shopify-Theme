<form id="CollectionFilters">

{% for block in section.blocks %}
  {% case block.type %}

  {% when 'availability-filter' %}
    {% for filter in collection.filters %}
      {% if filter.label == 'Availability' %}
        <fieldset>
          <legend>Availability</legend>
          {% for value in filter.values %}
            <label>
              <input type="checkbox" name="{{ value.param_name }}" value="{{ value.value }}" {% if value.active %}checked{% endif %}>
              {{ value.label }} ({{ value.count }})
            </label>
          {% endfor %}
        </fieldset>
      {% endif %}
    {% endfor %}

  {% when 'vendor-filter' %}
    {% for filter in collection.filters %}
      {% if filter.label == 'Vendor' %}
        <fieldset>
          <legend>{{ filter.label }}</legend>
          {% for value in filter.values %}
            <label>
              <input type="checkbox" name="{{ value.param_name }}" value="{{ value.value }}" {% if value.active %}checked{% endif %}>
              {{ value.label }} ({{ value.count }})
            </label>
          {% endfor %}
        </fieldset>
      {% endif %}
    {% endfor %}

  {% when 'color-filter' %}
    {% for filter in collection.filters %}
      {% if filter.label == 'Color' %}
        <fieldset>
          <legend>Color</legend>
          {% for value in filter.values %}
            <label>
              <input type="checkbox" name="{{ value.param_name }}" value="{{ value.value }}" {% if value.active %}checked{% endif %}>
              {{ value.label }}
            </label>
          {% endfor %}
        </fieldset>
      {% endif %}
    {% endfor %}

  {% when 'tag-filter' %}
    {% assign allowed = block.settings.custom_filter_tags | downcase | split: ',' %}
    {% for filter in collection.filters %}
      {% if filter.param_name contains '.tag' %}
        <fieldset>
          <legend>{{ block.settings.filter_title }}</legend>
          {% for value in filter.values %}
            {% assign tag = value.label | downcase | strip %}
            {% if allowed contains tag %}
              <label>
                <input type="checkbox" name="{{ value.param_name }}" value="{{ value.value }}" {% if value.active %}checked{% endif %}>
                {{ value.label }}
              </label>
            {% endif %}
          {% endfor %}
        </fieldset>
      {% endif %}
    {% endfor %}

  {% when 'price-filter' %}
    {% for filter in collection.filters %}
      {% if filter.type == 'price_range' %}
        <fieldset>
          <legend>Price</legend>
          <input type="number" name="{{ filter.min_value.param_name }}" placeholder="Min">
          <input type="number" name="{{ filter.max_value.param_name }}" placeholder="Max">
        </fieldset>
      {% endif %}
    {% endfor %}

  {% endcase %}
{% endfor %}

<button type="button" id="clearFiltersBtn">Clear All</button>
</form>
