{% unless product.has_only_default_variant %}
  <div class="variant-selector">
    {% for option in product.options_with_values %}

      {% assign option_name_downcase = option.name | downcase %}
      {% assign is_color = false %}

      {% if option_name_downcase contains 'color' or option_name_downcase contains 'colour' %}
        {% assign is_color = true %}
      {% endif %}

      <fieldset class="variant-group" data-option-index="{{ forloop.index0 }}">
        <legend>{{ option.name }}</legend>

        <div class="variant-buttons {% if is_color %}is-color{% endif %}">
          {% for value in option.values %}
            <label class="variant-btn {% if is_color %}variant-color{% endif %}">
              <input
                type="radio"
                name="options[{{ option.name }}]"
                value="{{ value }}"
                {% if option.selected_value == value %}checked{% endif %}
              >

              {% if is_color %}
                <span
                  class="color-swatch"
                  style="background-color: {{ value | downcase }};"
                  title="{{ value }}"
                ></span>
              {% else %}
                <span class="variant-text">{{ value }}</span>
              {% endif %}
            </label>
          {% endfor %}
        </div>
      </fieldset>

    {% endfor %}
  </div>
{% endunless %}
{% stylesheet %}
.variant-buttons {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
}

.variant-btn {
  position: relative;
  cursor: pointer;
}

.variant-btn input {
  display: none;
}

/* ===== TEXT OPTIONS ===== */
.variant-text {
  padding: 8px 14px;
  border: 1px solid #ddd;
  display: inline-block;
  transition: all 0.2s ease;
}

.variant-btn input:checked + .variant-text {
  border-color: #000;
  background: #000;
  color: #fff;
}

/* ===== COLOR SWATCH ===== */
.variant-color .color-swatch {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  display: block;
  border: 1px solid #ddd;
  transition: all 0.2s ease;
}

.variant-color input:checked + .color-swatch {
  border: 2px solid #000;
  transform: scale(1.1);
}

/* Tooltip (uses title attribute automatically) */

{% endstylesheet %}