<div class="customer-auth-layout">
  {% if customer %}

    <!-- LOGGED IN -->
    <div class="customer-logged-in">
      <h4 class="sub-title">Welcome, {{ customer.first_name }}</h4>
      <ul>
        <li><a href="{{ routes.account_url }}">Account</a></li>
        <li><a href="{{ routes.account_orders_url }}">Orders</a></li>
        <li><a href="{{ routes.account_addresses_url }}">Addresses</a></li>
        <li><a href="{{ routes.account_logout_url }}">Logout</a></li>
      </ul>
    </div>

  {% else %}

    <!-- LOGIN FORM -->
    <div class="user-login" data-login-form>
      <h4 class="sub-title">Login</h4>

      {% form 'customer_login' %}
        {{ form.errors | default_errors }}

        <input type="email" name="customer[email]" placeholder="Email" required>
        <input type="password" name="customer[password]" placeholder="Password" required>

        <button type="submit" class="btn btn-primary">Sign in</button>

        <p>
          <a href="#" data-show-recover>
            Forgot your password?
          </a>
        </p>
      {% endform %}
    </div>

    <!-- RECOVER PASSWORD FORM -->
    <div class="user-recover-password" data-recover-form style="display:none;">
      <h4 class="sub-title">Reset your password</h4>

      {% form 'recover_customer_password' %}
        {{ form.errors | default_errors }}

        {% if form.posted_successfully? %}
          <p class="success-message">
            Weâ€™ve sent you an email with a link to reset your password.
          </p>
        {% else %}
          <input
            type="email"
            name="email"
            placeholder="Email address"
            required
          >

          <button type="submit" class="btn btn-primary">
            Send reset link
          </button>

          <p>
            <a href="#" data-hide-recover>
              Back to login
            </a>
          </p>
        {% endif %}
      {% endform %}
    </div>

    <!-- REGISTER FORM -->
    <div class="user-create-account">
      <h4 class="sub-title">Create account</h4>

      {% form 'create_customer' %}
        {{ form.errors | default_errors }}

        <input type="text" name="customer[first_name]" placeholder="First name" required>
        <input type="text" name="customer[last_name]" placeholder="Last name" required>
        <input type="email" name="customer[email]" placeholder="Email" required>
        <input type="password" name="customer[password]" placeholder="Password" required>

        <button type="submit" class="btn btn-secondary">
          Create account
        </button>
      {% endform %}
    </div>

  {% endif %}

</div>
<script>
    document.addEventListener("click", function (e) {
  if (e.target.matches("[data-show-recover]")) {
    e.preventDefault();
    document.querySelector("[data-login-form]").style.display = "none";
    document.querySelector("[data-recover-form]").style.display = "block";
  }

  if (e.target.matches("[data-hide-recover]")) {
    e.preventDefault();
    document.querySelector("[data-recover-form]").style.display = "none";
    document.querySelector("[data-login-form]").style.display = "block";
  }
});

</script>