{% liquid
  assign first_class = 'collections-list ' | append: 'm-color-' | append: section.settings.color_scheme 
  assign first_class = first_class | append: ' ' | append: section.settings.color_control
  assign first_class = first_class | append: ' ' | append: section.settings.custom_class

  assign container_width = section.settings.container_width

  assign image_wapper_classes = ''
  unless section.settings.aspect_ratio == 'adapt-to-image'
    assign image_wapper_classes = image_wapper_classes | append: 'cropped-image-wrapper'
    assign image_wapper_classes = image_wapper_classes | append :' ' | append : section.settings.aspect_ratio
  endunless
  assign image_wapper_classes = image_wapper_classes | append :' ' | append : section.settings.hover_effect_action
%}
<div class="{{ first_class }}">
  <div class="{{ container_width }}">
    <div class="title-wrapper sidebar-space">
      <h2 class="h3">{{ 'collections.title' | t }}</h2>
    </div>
    
    <div class="inner-collections-list sidebar-space">
    <div
      class="collections cols-{{ section.settings.grid_columns }} {% if section.settings.show_two_mobile %} cols-mobile-2{% endif %}"
      style="--grid-gap: {{ section.settings.grid_gap }}px"
    >
      {% for collection in collections %}
        <a class="collection-card" href="{{ collection.url }}">
          {% if collection.featured_image %}
            {% render 'image',
              image: collection.featured_image,
              class: image_wapper_classes,
              img_alt: collection.title
            %}
          {% endif %}
          

          <div class="collection-card__content">
            <p>{{ collection.title }} <span>({{ collection.products_count }})</span></p>
            {% if collection.description %}
              <p>{{ collection.description | strip_html | truncatewords: 15 }}</p>
            {% endif %}
          </div>
        </a>
      {% endfor %}
    </div>
    </div>
  </div>
</div>

{% stylesheet %}
.collections-list {
    padding: 6rem 0 4rem 0;
}
.collections-list .title-wrapper h2 {
    text-transform: uppercase;
    margin-bottom: 2rem;
}
.collection-card__content p{
  padding: 0.5rem;
}
{% endstylesheet %}

{% schema %}
{
  "name": "t:general.collections_grid",
  "disabled_on": {"groups": ["header", "footer"]},
  "settings": [
    {
      "type": "select",
      "id": "container_width",
      "label": "Container width",
      "options": [
        { "value": "container", "label": "Container" },
        { "value": "container-fluid", "label": "Container fluid" },
        { "value": "container-narrow", "label": "Container narrow" },
        { "value": "container-extra-narrow", "label": "Container extra narrow" },
        { "value": "extended", "label": "Extended" }
      ],
      "default": "container"
    },
    {
      "type": "select",
      "id": "grid_item_width",
      "label": "t:labels.grid_item_width",
      "options": [
        { "value": "collections--compact", "label": "t:options.size.small" },
        { "value": "collections--full", "label": "t:options.size.large" }
      ],
      "default": "collections--full"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme"
    },
    {
      "type": "header",
      "content": "Product Grid"
    },
    {
      "type": "select",
      "id": "grid_columns",
      "label": "Grid Columns",
      "options": [
        { "value": "2", "label": "2" },
        { "value": "3", "label": "3" },
        { "value": "4", "label": "4" },
        { "value": "5", "label": "5" },
        { "value": "6", "label": "6" }
      ],
      "default": "4"
    },
    {
      "type": "checkbox",
      "id": "show_two_mobile",
      "label": "Show 2 col mobile",
      "info": "You can show 2 column in a mobile",
      "default": false
    },
    {
      "type": "range",
      "id": "grid_gap",
      "label": "t:labels.grid_gap",
      "min": 0,
      "max": 50,
      "step": 5,
      "unit": "px",
      "default": 10
    },
    {
      "type": "select",
      "id": "aspect_ratio",
      "label": "Aspect Ratio",
      "options": [
        { "value": "adapt-to-image", "label": "Adapt to image" },
        { "value": "cropped-image--square", "label": "Square" },
        { "value": "cropped-image--portrait", "label": "Portrait" },
        { "value": "cropped-image--portrait-tall", "label": "Portrait-tall" },
        { "value": "cropped-image--landscape", "label": "Landscape" },
        { "value": "cropped-image--wide", "label": "Wide" }
      ],
      "default": "cropped-image--square"
    },
      {
      "type": "select",
      "id": "hover_effect_action",
      "label": "Image Hover Effect",
      "options": [
        { "value": "no-effect", "label": "No effect" },
        { "value": "is-hover-zoom-in", "label": "Zoom in" },
        { "value": "is-hover-zoom-out", "label": "Zoom out" },
        { "value": "is-hover-zoom-up", "label": "Zoom up" },
        { "value": "is-hover-fade", "label": "Fade" },
        { "value": "is-hover-cinematic", "label": "Cinematic" },
        { "value": "is-hover-drift", "label": "Drift" },
        { "value": "is-hover-overlay", "label": "Overlay" }
      ],
      "default": "no-effect"
    },
    {
      "type": "text",
      "id": "custom_class",
      "label": "custom class"

    },
    {
      "type": "select",
      "id": "color_control",
      "label": "Color Control",
      "info": "These settings control the color of the sidebar text. If you select Dark, it will be a light shade of the sidebar text/icon color, and if you select Light, it will be a dark shade of the sidebar text/icon color.",
      "options": [
        { "value": "section-dark", "label": "Dark" },
        { "value": "section-light", "label": "Light" }
      ],
      "default": "section-light"
    },
  ]

}
{% endschema %}
