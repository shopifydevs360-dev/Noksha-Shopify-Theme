{% doc %}
  Flexible Layout Columns Section

  Each Column Item block can contain nested blocks.
{% enddoc %}

<section 
  class="layout-columns mobile-cols-{{ section.settings.mobile_columns }}"
  style="
    padding: {{ section.settings.padding }}px;
    --gap: {{ section.settings.column_gap }}px;
    --align-items: {{ section.settings.align_items }};
    --justify-content: {{ section.settings.justify_content }};
  "
>
  {% for block in section.blocks %}
    <div
      class="layout-columns__item"
      style="--col-span: {{ block.settings.column_span }};"
      {{ block.shopify_attributes }}
    >
      {% content_for 'blocks' %}
    </div>
  {% endfor %}
</section>

{% style %}

/* ================================
   Base layout
================================ */
.layout-columns {
  display: flex;
  flex-wrap: wrap;
  gap: var(--gap, 20px);

  align-items: var(--align-items, stretch);
  justify-content: var(--justify-content, flex-start);
}

/* Column proportional span */
.layout-columns__item {
  flex: var(--col-span, 1) 1 0;
  min-width: 0;
}

/* ================================
   Mobile behavior
================================ */
@media (max-width: 767px) {

  .mobile-cols-1 .layout-columns__item {
    flex: 0 0 100%;
  }

  .mobile-cols-2 .layout-columns__item {
    flex: 0 0 calc(50% - var(--gap, 20px) / 2);
  }

}

{% endstyle %}
