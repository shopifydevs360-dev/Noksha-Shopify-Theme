{% comment %}
  This section is used in the blog template to render the blog page listing all
  articles within a blog.

  https://shopify.dev/docs/storefronts/themes/architecture/templates/blog
{% endcomment %}

{% render 'section-base-style' %}
{% liquid
  assign ss = section.settings

  assign first_class = 'store-location-section ' | append: 'm-color-' | append: ss.color_scheme 
  assign first_class = first_class | append: ' ' | append: ss.color_control
  assign first_class = first_class | append: ' ' | append: ss.custom_class
  assign first_class = first_class | append: ' ' | append: 'section-' | append: section.id | append: '-padding'
  assign container_width = ss.container_width

  assign blog_classes = 'blogs'
  assign blog_classes = blog_classes | append: ' ' | append: 'cols-' | append: ss.grid_columns
  if ss.show_two_mobile
  assign blog_classes = blog_classes | append: ' ' | append: 'cols-mobile-2'
  endif

  assign image_wapper_classes = 'cropped-image-wrapper'
  assign wrapper_style = ''

  if ss.aspect_ratio == 'adapt-to-image'
    assign image_wapper_classes = image_wapper_classes | append: ' adapt-image-height'

  elsif ss.aspect_ratio == 'custom-height'
    assign image_wapper_classes = image_wapper_classes | append: ' custom-height-image'
    assign wrapper_style = 'height:' | append: ss.custom_height | append: 'px;'

  else
    assign image_wapper_classes = image_wapper_classes | append: ' ' | append: ss.aspect_ratio
  endif

  if ss.hover_effect_action != 'no-effect'
    assign image_wapper_classes = image_wapper_classes | append: ' ' | append: ss.hover_effect_action
  endif

  assign custom_width_style = ''
  if ss.enable_custom_width and ss.custom_width != blank
    assign custom_width_style = 'max-width:' | append: ss.custom_width | append: '%;margin-left:auto;margin-right:auto;'
  endif
%}
<div class="{{ first_class }}" id="store-location-{{ section.id }}">
  <div class="{{ container_width }}">
    <div class="inner-section {% if ss.enable_sidebar_space %}sidebar-space{% endif %}">
        <div class="hero-info text-{{ ss.text_align }}">
            {% render 'hero-info',
            heading: blog.title,
            heading_tag: 'h1',
            heading_size: ss.font_size,
            text_align: ss.text_align,
            container_width: container_width,
            style: custom_width_style
            %} 
        </div>
      <div class="inner-blog-list">
        <div class="{{ blog_classes }}" style="--grid-gap: {{ ss.grid_gap }}px">
          {% paginate blog.articles by 5 %}
          {% for article in blog.articles %}
            <div>
              {% if article.image %}

                  {% render 'image',
                    class: '{{ ss.image_wapper_class }}',
                    image: article.imag,
                    url: article.url,
                    width: 1000,
                    img_alt: ss.title,
                    style: wrapper_style
                  %}

                {{ article.image | image_url: width: 1000 | image_tag }}
              {% endif %}
              <h2>
                {{ article.title | link_to: article.url }}
              </h2>
              {% assign date = article.published_at | time_tag: format: 'date' %}
              <p>{{ 'blog.article_metadata_html' | t: date: date, author: article.author }}</p>
              <p>{{ article.excerpt }}</p>
            </div>
          {% endfor %}

          {%- if paginate.pages > 1 -%}
            {{- paginate | default_pagination -}}
          {%- endif -%}
        {% endpaginate %}
        </div>
      </div>
    </div>
  </div>
</div>
{% schema %}
{
  "name": "t:general.blog",
  "settings": [
        {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "checkbox",
      "id": "enable_sidebar_space",
      "label": "Enable sidebar space",
      "default": true
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme"
    },
    {
      "type": "select",
      "id": "container_width",
      "label": "Container width",
      "options": [
        { "value": "container", "label": "Container" },
        { "value": "container-fluid", "label": "Container fluid" },
        { "value": "container-narrow", "label": "Container narrow" },
        { "value": "container-extra-narrow", "label": "Container extra narrow" },
        { "value": "full-width", "label": "Full width" },
        { "value": "extended", "label": "Extended" }
      ],
      "default": "extended"
    },
    {
      "type": "select",
      "id": "font_size",
      "label": "Font size",
      "info": "Blog title font size",
      "options": [
        { "value": "h1", "label": "h1" },
        { "value": "h2", "label": "h2" },
        { "value": "h3", "label": "h3" },
        { "value": "h4", "label": "h4" },
      ],
      "default": "h3"
    },
    {
      "type": "select",
      "id": "text_align",
      "label": "Text align",
      "info": "Blog title text align",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "right", "label": "Right" },
      ],
      "default": "center"
    },
        {
      "type": "header",
      "content": "Post Grid"
    },
    {
      "type": "select",
      "id": "grid_columns",
      "label": "Grid Columns",
      "options": [
        { "value": "2", "label": "2" },
        { "value": "3", "label": "3" },
        { "value": "4", "label": "4" },
        { "value": "5", "label": "5" },
        { "value": "6", "label": "6" }
      ],
      "default": "4"
    },
    {
      "type": "checkbox",
      "id": "show_two_mobile",
      "label": "Show 2 col mobile",
      "info": "You can show 2 column in a mobile",
      "default": false
    },
    {
      "type": "range",
      "id": "grid_gap",
      "label": "t:labels.grid_gap",
      "min": 0,
      "max": 50,
      "step": 5,
      "unit": "px",
      "default": 10
    },
    {
      "type": "select",
      "id": "aspect_ratio",
      "label": "Aspect Ratio",
      "options": [
        { "value": "adapt-to-image", "label": "Adapt to image" },
        { "value": "cropped-image--square", "label": "Square" },
        { "value": "cropped-image--portrait", "label": "Portrait" },
        { "value": "cropped-image--portrait-tall", "label": "Portrait-tall" },
        { "value": "cropped-image--landscape", "label": "Landscape" },
        { "value": "cropped-image--wide", "label": "Wide" }
      ],
      "default": "cropped-image--square"
    },
      {
      "type": "select",
      "id": "hover_effect_action",
      "label": "Image Hover Effect",
      "options": [
        { "value": "no-effect", "label": "No effect" },
        { "value": "is-hover-zoom-in", "label": "Zoom in" },
        { "value": "is-hover-zoom-out", "label": "Zoom out" },
        { "value": "is-hover-zoom-up", "label": "Zoom up" },
        { "value": "is-hover-fade", "label": "Fade" },
        { "value": "is-hover-cinematic", "label": "Cinematic" },
        { "value": "is-hover-drift", "label": "Drift" },
        { "value": "is-hover-overlay", "label": "Overlay" }
      ],
      "default": "no-effect"
    },
    {
      "type": "header",
      "content": "Section padding"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Top padding",
      "default": 40
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Bottom padding",
      "default": 52
    },
    {
      "type": "text",
      "id": "custom_class",
      "label": "Custom class"
    },
    {
      "type": "select",
      "id": "color_control",
      "label": "Color Control",
      "options": [
        { "value": "section-dark", "label": "Dark" },
        { "value": "section-light", "label": "Light" }
      ],
      "default": "section-light"
    }
  ]
}
{% endschema %}
