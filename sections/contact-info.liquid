{% liquid
  assign first_class = 'contact-section ' | append: 'm-color-' | append: section.settings.color_scheme 
  assign first_class = first_class | append: ' ' | append: section.settings.color_control
  assign first_class = first_class | append: ' ' | append: section.settings.custom_class

  assign container_width = section.settings.container_width
%}

<div class="{{ first_class }}">
  <div class="{{ container_width }} container-wrapper">

    <div class="contact-wrapper cols-2 {% if section.settings.enable_sidebar_space %}sidebar-space{% endif %}">

      <!-- LEFT SIDE -->
      <div class="contact-info">
         {% for block in section.blocks %}
            {%- case block.type -%}
             {%- when '@app' -%}
                <div class="info-card" {{ block.shopify_attributes }}>
                <h3>{{ block.settings.title }}</h3>
                {% if block.settings.link != blank %}
                    <p>
                    <a href="{{ block.settings.link }}">
                        {{ block.settings.text }}
                    </a>
                    </p>
                {% else %}
                    <p>{{ block.settings.text }}</p>
                {% endif %}
                </div>
              {%- when 'sub_heading' -%}
                <div class="info-card" {{ block.shopify_attributes }}>
                    {% render 'socials-link' %}
                </div>

            {% endcase -%}
          {% endfor %}

        <!-- SOCIAL ICONS -->
        <div class="social-icons">
          <ul class="social-icons-list">
            {% if settings.social_facebook_link != blank %}
              <li><a href="{{ settings.social_facebook_link }}" aria-label="Facebook">{%- render 'theme-icon', icon: 'facebook' -%}</a></li>
            {% endif %}
            {% if settings.social_instagram_link != blank %}
              <li><a href="{{ settings.social_instagram_link }}" aria-label="Instagram">{%- render 'theme-icon', icon: 'instagram' -%}</a></li>
            {% endif %}
            {% if settings.social_tiktok_link != blank %}
              <li><a href="{{ settings.social_tiktok_link }}" aria-label="TikTok">{%- render 'theme-icon', icon: 'tiktok' -%}</a></li>
            {% endif %}
            {% if settings.social_whatsapp_link != blank %}
              <li><a href="{{ settings.social_whatsapp_link }}" aria-label="WhatsApp">{%- render 'theme-icon', icon: 'whatsapp' -%}</a></li>
            {% endif %}
            {% if settings.social_youtube_link != blank %}
              <li><a href="{{ settings.social_youtube_link }}" aria-label="YouTube">{%- render 'theme-icon', icon: 'youtube' -%}</a></li>
            {% endif %}
          </ul>
        </div>

      </div>


      <!-- RIGHT SIDE -->
      <div class="contact-form">

        {% form 'contact' %}

          {% if form.posted_successfully? %}
            <div class="form-success">
              Message sent successfully.
            </div>
          {% endif %}

          {% if form.errors %}
            <div class="form-errors">
              {{ form.errors | default_errors }}
            </div>
          {% endif %}

          <div class="field">
            <label for="ContactName">Full name</label>
            <input
              type="text"
              id="ContactName"
              name="contact[name]"
              value="{{ form.name }}"
              placeholder="Enter your full name"
              required
            >
          </div>

          <div class="field">
            <label for="ContactEmail">Email</label>
            <input
              type="email"
              id="ContactEmail"
              name="contact[email]"
              value="{{ form.email }}"
              placeholder="Enter your email address"
              required
            >
          </div>

          <div class="field">
            <label for="ContactSubject">Subject</label>
            <input
              type="text"
              id="ContactSubject"
              name="contact[subject]"
              placeholder="Enter subject"
              required
            >
          </div>

          <div class="field">
            <label for="ContactMessage">Message</label>
            <textarea
              id="ContactMessage"
              name="contact[body]"
              rows="6"
              placeholder="Write your message here"
              required
            ></textarea>
          </div>

          <button type="submit" class="button">
            Send message
          </button>

        {% endform %}

      </div>

    </div>
  </div>
</div>


{% stylesheet %}
.contact-section {
  padding: 6rem 0;
}

.contact-wrapper {
  gap: 5rem;
}

/* LEFT SIDE */
.contact-info {
  max-width: 280px;
}

.info-card {
  margin-bottom: 2rem;
}

.info-card h3 {
  font-size: 0.85rem;
  text-transform: uppercase;
  letter-spacing: 1px;
  margin-bottom: 0.6rem;
}

.info-card a {
  text-decoration: none;
  border-bottom: 1px solid rgb(var(--color-border));
  font-size: 1rem;
}

/* SOCIAL ICONS VERTICAL */
.social-icons {
  margin-top: 2rem;
}

.social-icons-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.social-icons-list li {
  margin-bottom: 1rem;
}

.social-icons-list a {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  color: rgb(var(--color-heading));
  transition: 0.3s ease;
}

.social-icons-list a:hover {
  opacity: 0.7;
}


/* FORM */
.contact-form form {
  max-width: 520px;
}

.field {
  display: flex;
  flex-direction: column;
}

.contact-form label {
  font-size: 0.8rem;
  text-transform: uppercase;
  letter-spacing: 1px;
  margin-bottom: 0.4rem;
}

.contact-form input,
.contact-form textarea {
  padding: .8rem 0;
  border-bottom: 2px solid rgb(var(--color-heading));
  background: transparent;
  border-radius: 0;
  margin-bottom: 2rem;
}

.contact-form textarea {
  resize: vertical;
}

.button {
  background: rgb(var(--color-heading));
  color: rgb(var(--color-background));
  border: none;
  padding: 1rem 2.5rem;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.button:hover {
  opacity: 0.85;
}

.form-errors {
  margin-bottom: 1.5rem;
  padding: 1rem;
  border: 1px solid #b3261e;
  color: #b3261e;
}

.form-success {
  margin-bottom: 1.5rem;
  padding: 1rem;
  border: 1px solid green;
  color: green;
}
{% endstylesheet %}


{% schema %}
{
  "name": "Contact Info",
  "settings": [
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "checkbox",
      "id": "enable_sidebar_space",
      "label": "Enable sidebar space",
      "default": true
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme"
    },
    {
      "type": "select",
      "id": "container_width",
      "label": "Container width",
      "options": [
        { "value": "container", "label": "Container" },
        { "value": "container-fluid", "label": "Container fluid" },
        { "value": "container-narrow", "label": "Container narrow" },
        { "value": "container-extra-narrow", "label": "Container extra narrow" },
        { "value": "extended", "label": "Extended" }
      ],
      "default": "extended"
    },
    {
      "type": "text",
      "id": "custom_class",
      "label": "Custom class"
    },
    {
      "type": "select",
      "id": "color_control",
      "label": "Color Control",
      "options": [
        { "value": "section-dark", "label": "Dark" },
        { "value": "section-light", "label": "Light" }
      ],
      "default": "section-light"
    }
  ],
  "blocks": [
    {
      "type": "text-block",
      "name": "Text block",
      "settings": [
        {
            "type": "image_picker",
            "id": "image_icon",
            "label": "Image icon"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Call us"
        },
        {
          "type": "richtext",
          "id": "content",
          "label": "Content"
        }
      ]
    },
    {
      "type": "store-address",
      "name": "Store Address",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Store Location"
        },
        {
          "type": "richtext",
          "id": "content",
          "label": "Content"
        }
      ]
    },
    {
      "type": "phone",
      "name": "Phone",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Phone"
        },
        {
          "type": "richtext",
          "id": "content",
          "label": "Content"
        }
      ]
    },
    {
      "type": "email",
      "name": "Email",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Email"
        },
        {
          "type": "richtext",
          "id": "content",
          "label": "Content"
        }
      ]
    },
    {
      "type": "whatsapp",
      "name": "Whatsapp",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Whatsapp"
        },
        {
          "type": "richtext",
          "id": "content",
          "label": "Content"
        }
      ]
    },
    {
      "type": "socials-link",
      "name": "Socials link",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Get in touch"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Contact Info",
      "blocks": [
        { "type": "store-address" },
        { "type": "phone" },
        { "type": "email" },
        { "type": "whatsapp" },
        { "type": "socials-link" },
      ]
    }
  ]
}
{% endschema %}
