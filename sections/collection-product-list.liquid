{{ 'collection-product-list.css' | asset_url | stylesheet_tag }}
{{ 'products-filter.css' | asset_url | stylesheet_tag }}

<section
  class="collection-section m-color-{{ section.settings.color_scheme.id }} {{ section.settings.color_control }} {{ section.settings.custom_class }}"
  data-section-id="{{ section.id }}"
  data-pagination-type="{{ section.settings.pagination_type }}"
  data-products-per-page="{{ section.settings.products_per_page }}"
>

  <div class="{{ section.settings.container_type }}">
    <div class="collection-wrapper sidebar-space">

      <!-- FILTER SIDEBAR -->
      {% if section.settings.enable_filter %}
        {% render 'products-filter', section: section, collection: collection %}
      {% endif %}

      <!-- PRODUCT LIST -->
      <main class="product-list-wrapper">
        <div id="ProductsGrid">
          {% paginate collection.products by section.settings.products_per_page %}
            <div class="products-grid cols-{{ section.settings.grid_columns_desktop }}">
              {% for product in collection.products %}
                {% render 'product-card-template', product: product %}
              {% endfor %}
            </div>

            {% if section.settings.enable_pagination %}
              <div id="PaginationWrapper">
                {{ paginate | default_pagination }}
              </div>
            {% endif %}
          {% endpaginate %}
        </div>
      </main>

    </div>
  </div>

</section>

<script src="{{ 'products-filter.js' | asset_url }}" defer></script>
<script src="{{ 'pagination.js' | asset_url }}" defer></script>

{% schema %}
{
  "name": "Collection Product List",
  "settings": [
    { "type": "select", "id": "container_type", "label": "Container", "options": [
      { "value": "container", "label": "Container" },
      { "value": "container-fluid", "label": "Fluid" },
      { "value": "full-width", "label": "Full Width" }
    ], "default": "container" },

    { "type": "color_scheme", "id": "color_scheme", "label": "Color Scheme" },

    { "type": "select", "id": "grid_columns_desktop", "label": "Grid Columns", "options": [
      { "value": "2", "label": "2" },
      { "value": "3", "label": "3" },
      { "value": "4", "label": "4" }
    ], "default": "4" },

    { "type": "checkbox", "id": "enable_filter", "label": "Enable Filter", "default": true },
    { "type": "checkbox", "id": "enable_pagination", "label": "Enable Pagination", "default": true },

    { "type": "range", "label": "Product Grid", "id": "products_per_page", "min": 2, "max": 48, "step": 1, "default": 12 },

    { "type": "select", "id": "pagination_type", "label": "Pagination Type", "options": [
      { "value": "pagination_by_number", "label": "Numbered" },
      { "value": "load_more_button", "label": "Load More" },
      { "value": "infinite_scroll", "label": "Infinite Scroll" }
    ], "default": "pagination_by_number" }
  ],

  "blocks": [
    { "type": "availability", "name": "Availability" },
    { "type": "vendor", "name": "Brand" },
    { "type": "collection", "name": "Collection" },
    { "type": "color", "name": "Color" },
    {
      "type": "tag",
      "name": "Tag",
      "settings": [
        { "type": "text", "id": "tags", "label": "Tags (comma separated)" }
      ]
    }
  ]
}
{% endschema %}
