{% render 'section-base-style' %}

{% liquid
  assign ss = section.settings

  assign first_class = 'gallery-section '
  assign first_class = first_class | append: 'm-color-' | append: ss.color_scheme
  assign first_class = first_class | append: ' ' | append: ss.color_control
  assign first_class = first_class | append: ' ' | append: ss.custom_class
  assign first_class = first_class | append: ' section-' | append: section.id | append: '-padding'

  assign container_width = ss.container_width

  assign grid_classes = 'gallery-grid cols-item-' | append: ss.grid_columns

  if ss.show_two_mobile
    assign grid_classes = grid_classes | append: ' cols-item-mobile-2'
  endif

  assign image_wrapper_classes = 'cropped-image-wrapper'

  if ss.aspect_ratio == 'adapt-to-image'
    assign image_wrapper_classes = image_wrapper_classes | append: ' adapt-image-height'
  elsif ss.aspect_ratio == 'custom-height'
    assign image_wrapper_classes = image_wrapper_classes | append: ' custom-height-image'
    assign wrapper_style = 'height:' | append: ss.custom_height | append: 'px;'
  else
    assign image_wrapper_classes = image_wrapper_classes | append: ' ' | append: ss.aspect_ratio
  endif

  if ss.hover_effect_action != 'no-effect'
    assign image_wrapper_classes = image_wrapper_classes | append: ' ' | append: ss.hover_effect_action
  endif
%}


<div class="{{ first_class }}" id="gallery-{{ section.id }}">
  <div class="{{ container_width }}">
    <div class="inner-section {% if ss.enable_sidebar_space %}sidebar-space{% endif %}">

      <div class="hero-info text-{{ ss.text_align }}">
        {% render 'hero-info',
          heading: ss.hero_title,
          description: ss.hero_description,
          heading_tag: 'h1',
          heading_size: ss.font_size,
          text_align: ss.text_align,
          container_width: ss.container_width
        %}
      </div>

      <div class="gallery-wrapper">
        <div class="{{ grid_classes }}" style="gap: {{ ss.grid_gap }}px;">

          {% for block in section.blocks %}
            {% assign gallery_image = block.settings.image %}
            {% assign image_url = block.settings.image_url %}

            <div class="image-item" {{ block.shopify_attributes }}>
              {% if gallery_image != blank %}
                {% render 'image',
                  class: image_wrapper_classes,
                  image: gallery_image,
                  url: image_url,
                  width: gallery_image.width,
                  height: gallery_image.height,
                  crop: 'center',
                  img_alt: gallery_image.alt,
                  style: wrapper_style
                %}
              {% endif %}
            </div>

          {% endfor %}

        </div>
      </div>

    </div>
  </div>
</div>

{% stylesheet %}
.gallery-grid {
  display: grid;
}

.gallery-grid.cols-item-2 { grid-template-columns: repeat(2, 1fr); }
.gallery-grid.cols-item-3 { grid-template-columns: repeat(3, 1fr); }
.gallery-grid.cols-item-4 { grid-template-columns: repeat(4, 1fr); }
.gallery-grid.cols-item-5 { grid-template-columns: repeat(5, 1fr); }
.gallery-grid.cols-item-6 { grid-template-columns: repeat(6, 1fr); }

@media (max-width: 767px) {
  .gallery-grid.cols-item-mobile-2 {
    grid-template-columns: repeat(2, 1fr);
  }
}
{% endstylesheet %}
{% schema %}
{
  "name": "Gallery",
  "settings": [
    { "type": "header", "content": "Layout" },

    { "type": "checkbox", "id": "enable_sidebar_space", "label": "Enable sidebar space", "default": true },

    { "type": "color_scheme", "id": "color_scheme", "label": "Color scheme" },

    {
      "type": "select",
      "id": "container_width",
      "label": "Container width",
      "options": [
        { "value": "container", "label": "Container" },
        { "value": "container-fluid", "label": "Container fluid" },
        { "value": "container-narrow", "label": "Container narrow" },
        { "value": "container-extra-narrow", "label": "Container extra narrow" },
        { "value": "full-width", "label": "Full width" },
        { "value": "extended", "label": "Extended" }
      ],
      "default": "extended"
    },

    { "type": "text", "id": "hero_title", "label": "Hero Title", "default": "Lookbook" },

    {
      "type": "select",
      "id": "font_size",
      "label": "Font size",
      "options": [
        { "value": "h1", "label": "h1" },
        { "value": "h2", "label": "h2" },
        { "value": "h3", "label": "h3" },
        { "value": "h4", "label": "h4" }
      ],
      "default": "h3"
    },

    {
      "type": "richtext",
      "id": "hero_description",
      "label": "Hero description",
      "default": "<p>Real styles for the modern woman. Get inspired by our latest collections in action.</p>"
    },

    {
      "type": "select",
      "id": "text_align",
      "label": "Text align",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "right", "label": "Right" }
      ],
      "default": "center"
    },

    { "type": "header", "content": "Image Grid" },

    {
      "type": "select",
      "id": "grid_columns",
      "label": "Grid Columns",
      "options": [
        { "value": "2", "label": "2" },
        { "value": "3", "label": "3" },
        { "value": "4", "label": "4" },
        { "value": "5", "label": "5" },
        { "value": "6", "label": "6" }
      ],
      "default": "4"
    },

    { "type": "checkbox", "id": "show_two_mobile", "label": "Show 2 col mobile", "default": false },

    {
      "type": "range",
      "id": "grid_gap",
      "label": "Grid gap",
      "min": 0,
      "max": 50,
      "step": 5,
      "unit": "px",
      "default": 10
    },

    { "type": "header", "content": "Aspect Ratio" },

    {
      "type": "select",
      "id": "aspect_ratio",
      "label": "Aspect ratio",
      "default": "adapt-to-image",
      "options": [
        { "value": "adapt-to-image", "label": "Adapt to image" },
        { "value": "cropped-image--square", "label": "Square" },
        { "value": "cropped-image--portrait", "label": "Portrait" },
        { "value": "cropped-image--portrait-tall", "label": "Portrait tall" },
        { "value": "cropped-image--landscape", "label": "Landscape" },
        { "value": "cropped-image--wide", "label": "Wide (16:9)" },
        { "value": "custom-height", "label": "Custom height" }
      ]
    },
    {
      "type": "range",
      "id": "custom_height",
      "label": "Custom height (px)",
      "min": 100,
      "max": 1200,
      "step": 20,
      "unit": "px",
      "default": 400,
      "visible_if": "{{ section.settings.aspect_ratio == 'custom-height' }}"
    },

    { "type": "header", "content": "Hover Effect" },

    {
      "type": "select",
      "id": "hover_effect_action",
      "label": "Hover effect",
      "default": "no-effect",
      "options": [
        { "value": "no-effect", "label": "No effect" },
        { "value": "is-hover-zoom-in", "label": "Zoom in" },
        { "value": "is-hover-zoom-out", "label": "Zoom out" },
        { "value": "is-hover-zoom-up", "label": "Zoom up" },
        { "value": "is-hover-fade", "label": "Fade" },
        { "value": "is-hover-cinematic", "label": "Cinematic" },
        { "value": "is-hover-drift", "label": "Drift" },
        { "value": "is-hover-overlay", "label": "Overlay" }
      ]
    },

    { "type": "range", "id": "padding_top", "min": 0, "max": 100, "step": 4, "unit": "px", "label": "Top padding", "default": 40 },
    { "type": "range", "id": "padding_bottom", "min": 0, "max": 100, "step": 4, "unit": "px", "label": "Bottom padding", "default": 52 },

    { "type": "text", "id": "custom_class", "label": "Custom class" },

    {
      "type": "select",
      "id": "color_control",
      "label": "Color Control",
      "options": [
        { "value": "section-dark", "label": "Dark" },
        { "value": "section-light", "label": "Light" }
      ],
      "default": "section-light"
    }
  ],

  "blocks": [
    {
      "type": "image",
      "name": "Image",
      "settings": [
        { "type": "image_picker", "id": "image", "label": "Image" },
        { "type": "url", "id": "image_url", "label": "Image link" }
      ]
    }
  ],

  "presets": [
    { "name": "Gallery" }
  ]
}

{% endschema %}