{% if product and product.collections.size > 0 %}

{% assign related_collection = product.collections.first %}

<section style="padding:40px 0;">

  <div class="container">
    <h2>Related Products</h2>

    <ul>
      {% assign shown = 0 %}

      {% for related_product in related_collection.products %}
        {% if related_product.id != product.id and shown < 6 %}

          <li style="margin-bottom:10px;">
            {{ related_product.title }}
          </li>

          {% assign shown = shown | plus: 1 %}

        {% endif %}
      {% endfor %}

      {% if shown == 0 %}
        <p>No related products found in this collection.</p>
      {% endif %}

    </ul>
  </div>

</section>

{% endif %}


{% schema %}
{
  "name": "Related Products",
  "settings": [
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Section Title",
      "default": "You may also like"
    },
    {
      "type": "range",
      "id": "limit",
      "min": 2,
      "max": 12,
      "step": 1,
      "label": "Products to show",
      "default": 6
    },
    {
      "type": "header",
      "content": "Section padding"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Top padding",
      "default": 40
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Bottom padding",
      "default": 52
    },
    {
      "type": "header",
      "content": "Dynamic Option"
    },
    {
      "type": "text",
      "id": "custom_class",
      "label": "Custom class"
    },
    {
      "type": "select",
      "id": "color_control",
      "label": "Color Control",
      "options": [
        { "value": "section-dark", "label": "Dark" },
        { "value": "section-light", "label": "Light" }
      ],
      "default": "section-light"
    }
  ],
  "presets": [
    {
      "name": "Related Products",
      "category": "Products"
    }
  ]
}
{% endschema %}
