{% if product %}

<section
  id="product-recommendations-{{ section.id }}"
  style="padding: 40px 0;"
>

  <product-recommendations
    data-url="{{ routes.product_recommendations_url }}?section_id={{ section.id }}&product_id={{ product.id }}&limit=6&intent=related"
  >

    {% if recommendations.products_count > 0 %}

      <div class="container">

        <h2>Related Products (Test Mode)</h2>

        <ul>
          {% for recommended_product in recommendations.products %}
            <li style="margin-bottom: 10px;">
              {{ recommended_product.title }}
            </li>
          {% endfor %}
        </ul>

      </div>

    {% else %}

      <p style="padding:20px;">No recommendations found.</p>

    {% endif %}

  </product-recommendations>

</section>

{% endif %}


{% schema %}
{
  "name": "Related Products",
  "settings": [
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Section Title",
      "default": "You may also like"
    },
    {
      "type": "range",
      "id": "limit",
      "min": 2,
      "max": 12,
      "step": 1,
      "label": "Products to show",
      "default": 6
    },
    {
      "type": "header",
      "content": "Section padding"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Top padding",
      "default": 40
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Bottom padding",
      "default": 52
    },
    {
      "type": "header",
      "content": "Dynamic Option"
    },
    {
      "type": "text",
      "id": "custom_class",
      "label": "Custom class"
    },
    {
      "type": "select",
      "id": "color_control",
      "label": "Color Control",
      "options": [
        { "value": "section-dark", "label": "Dark" },
        { "value": "section-light", "label": "Light" }
      ],
      "default": "section-light"
    }
  ],
  "presets": [
    {
      "name": "Related Products",
      "category": "Products"
    }
  ]
}
{% endschema %}
