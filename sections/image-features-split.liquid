{% render 'section-base-style' %}

{% liquid
  assign ss = section.settings

  assign first_class = 'image-features-section ' | append: 'm-color-' | append: ss.color_scheme 
  assign first_class = first_class | append: ' ' | append: ss.color_control
  assign first_class = first_class | append: ' ' | append: ss.custom_class
  assign first_class = first_class | append: ' ' | append: 'section-' | append: section.id | append: '-padding'
  assign container_width = ss.container_width


  assign image_wapper_classes = 'cropped-image-wrapper'
  assign wrapper_style = ''

  if ss.aspect_ratio == 'adapt-to-image'
    assign image_wapper_classes = image_wapper_classes | append: ' adapt-image-height'

  elsif ss.aspect_ratio == 'custom-height'
    assign image_wapper_classes = image_wapper_classes | append: ' custom-height-image'
    assign wrapper_style = 'height:' | append: ss.custom_height | append: 'px;'

  else
    assign image_wapper_classes = image_wapper_classes | append: ' ' | append: ss.aspect_ratio
  endif

  assign wrapper_class = 'split-wrapper d-flex flex-column'
  if ss.reverse_layout == 'right'
  assign wrapper_class = wrapper_class  | append: ' '| append: 'flex-row-reverse-md'
  elsif ss.reverse_layout == 'left'
  assign wrapper_class = wrapper_class  | append: ' '| append: 'flex-row-md'
  endif
  if ss.enable_sidebar_space
  assign wrapper_class = wrapper_class  | append: ' '| append: 'sidebar-space'
  endif

%}

<div class="{{ first_class }}" id="image-features-{{ section.id }}">
  <div class="{{ container_width }}">
    
    <div class="{{ wrapper_class }}">

      <!-- IMAGE SIDE -->
      <div class="split-image">
        {% if ss.image != blank %}
            {% render 'image',
              class: image_wapper_classes,
              image: ss.image,
              img_alt: ss.heading,
              style: wrapper_style
            %}
        {% endif %}
      </div>

      <!-- CONTENT SIDE -->
      <div class="split-content text-{{ ss.text_align }}">

        {% if ss.heading != blank %}
          <h2 class="{{ ss.font_size }}">
            {{ ss.heading }}
          </h2>
        {% endif %}

        {% if ss.subheading != blank %}
          <div class="section-description">
            {{ ss.subheading }}
          </div>
        {% endif %}

        {% if section.blocks.size > 0 %}
          <div class="feature-list">
            {% for block in section.blocks %}
              <div class="feature-item" {{ block.shopify_attributes }}>
                
                <!-- ICON -->

                <div class="feature-icon">
                  {% if block.settings.icon_type == 'theme' and block.settings.theme_icon != blank %}
                    {% render 'theme-icon', icon: block.settings.theme_icon %}
                  {% elsif block.settings.icon_type == 'custom' and block.settings.custom_svg != blank %}
                    {{ block.settings.custom_svg }}
                  {% endif %}
                </div>

                <!-- TEXT -->
                <div class="feature-text">
                  {% if block.settings.title != blank %}
                    <h4>{{ block.settings.title }}</h4>
                  {% endif %}

                  {% if block.settings.description != blank %}
                    <div class="feature-description">
                      {{ block.settings.description }}
                    </div>
                  {% endif %}
                </div>

              </div>
            {% endfor %}
          </div>
        {% endif %}

      </div>

    </div>

  </div>
</div>

{% stylesheet %}

.image-features-section .split-wrapper {
  align-items: center;
  gap: 2rem;
}

.split-content.text-left {
    padding: 2rem;
}

.image-features-section .split-image {
  flex: 1;
}

.image-features-section .split-image img {
  width: 100%;
  height: auto;
  display: block;
}

.image-features-section .split-content {
  flex: 1;
}

.image-features-section .split-content h2 {
  margin-bottom: 0.7rem;
}
.section-description {
    margin-bottom: 2rem;
}
.image-features-section .feature-list {
  display: flex;
  flex-direction: column;
  gap: 1.6rem;
}

.image-features-section .feature-item {
  display: flex;
  gap: 1rem;
  align-items: flex-start;
}
.feature-icon {
    width: 3rem;
}
.image-features-section .feature-icon svg {
  width: 3rem;
  height: auto;
}

.image-features-section .feature-text h4 {
  margin-bottom: 6px;
  font-size: 18px;
}

.image-features-section .feature-description {
  font-size: 14px;
  opacity: 0.85;
}

/* Responsive */
@media (max-width: 991px) {
  .image-features-section .split-wrapper {
    flex-direction: column;
  }

  .image-features-section .split-wrapper.reverse {
    flex-direction: column;
  }
}

{% endstylesheet %}

{% schema %}
{
  "name": "Image Features Split",
  "settings": [
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "checkbox",
      "id": "enable_sidebar_space",
      "label": "Enable sidebar space",
      "default": true
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme"
    },
    {
      "type": "select",
      "id": "container_width",
      "label": "Container width",
      "options": [
        { "value": "container", "label": "Container" },
        { "value": "container-fluid", "label": "Container fluid" },
        { "value": "container-narrow", "label": "Container narrow" },
        { "value": "container-extra-narrow", "label": "Container extra narrow" },
        { "value": "full-width", "label": "Full width" },
        { "value": "extended", "label": "Extended" }
      ],
      "default": "extended"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "We are proudly Australian."
    },
    {
      "type": "richtext",
      "id": "subheading",
      "label": "Subheading"
    },
    {
      "type": "select",
      "id": "font_size",
      "label": "Font size",
      "options": [
        { "value": "h1", "label": "h1" },
        { "value": "h2", "label": "h2" },
        { "value": "h3", "label": "h3" },
        { "value": "h4", "label": "h4" },
      ],
      "default": "h3"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Left Image"
    },
        {
      "type": "header",
      "content": "Aspect Ratio"
    },
    {
      "type": "select",
      "id": "aspect_ratio",
      "label": "Aspect ratio",
      "default": "adapt-to-image",
      "options": [
        { "value": "adapt-to-image", "label": "Adapt to image" },
        { "value": "cropped-image--square", "label": "Square" },
        { "value": "cropped-image--portrait", "label": "Portrait" },
        { "value": "cropped-image--portrait-tall", "label": "Portrait tall" },
        { "value": "cropped-image--landscape", "label": "Landscape" },
        { "value": "cropped-image--wide", "label": "Wide (16:9)" },
        { "value": "custom-height", "label": "Custom height" }
      ]
    },
    {
      "type": "range",
      "id": "custom_height",
      "label": "Custom height (px)",
      "min": 100,
      "max": 1200,
      "step": 20,
      "unit": "px",
      "default": 400,
      "visible_if": "{{ section.settings.aspect_ratio == 'custom-height' }}"
    },
    {
      "type": "select",
      "id": "reverse_layout",
      "label": "Image",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "right", "label": "Right" }
      ],
      "default": "left"
    },
    {
      "type": "select",
      "id": "text_align",
      "label": "Text Alignment",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "right", "label": "Right" }
      ],
      "default": "left"
    },
    {
      "type": "select",
      "id": "color_control",
      "label": "Color Control",
      "options": [
        { "value": "section-light", "label": "Light" },
        { "value": "section-dark", "label": "Dark" }
      ],
      "default": "section-light"
    },
    {
      "type": "text",
      "id": "custom_class",
      "label": "Custom class"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 120,
      "step": 4,
      "unit": "px",
      "label": "Top padding",
      "default": 80
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 120,
      "step": 4,
      "unit": "px",
      "label": "Bottom padding",
      "default": 80
    }
  ],

  "blocks": [
    {
      "type": "feature",
      "name": "Feature Item",
      "settings": [
        {
          "type": "select",
          "id": "icon_type",
          "label": "Use Icon From",
          "options": [
            { "value": "theme", "label": "Theme" },
            { "value": "custom", "label": "Custom SVG" }
          ],
          "default": "theme"
        },
        {
          "type": "text",
          "id": "theme_icon",
          "label": "Theme Icon Name",
          "visible_if": "{{ block.settings.icon_type == 'theme' }}"
        },
        {
          "type": "textarea",
          "id": "custom_svg",
          "label": "Custom SVG Code",
          "visible_if": "{{ block.settings.icon_type == 'custom' }}"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Soft Fabric"
        },
        {
          "type": "richtext",
          "id": "description",
          "label": "Description",
          "default": "<p>Feature description goes here.</p>"
        }
      ]
    }
  ],

  "presets": [
    {
      "name": "Image Features Split",
      "blocks": [
        { "type": "feature" },
        { "type": "feature" },
        { "type": "feature" }
      ]
    }
  ]
}
{% endschema %}
