{% doc %}
  Advanced Content Card
{% enddoc %}

{% liquid
  assign card_classes = 'content-card'

  if block.settings.custom_class != blank
    assign card_classes = card_classes | append: ' ' | append: block.settings.custom_class
  endif

  assign background_style = ''
  if block.settings.background_type == 'solid'
    assign background_style = 'background:' | append: block.settings.background_color | append: ';'
  elsif block.settings.background_type == 'gradient'
    assign background_style = 'background:' | append: block.settings.background_gradient | append: ';'
  endif

  assign max_width_style = ''
  if block.settings.enable_max_width and block.settings.max_width_value != blank
    assign max_width_style = 'max-width:' | append: block.settings.max_width_value | append: block.settings.max_width_unit | append: ';margin-left:auto;margin-right:auto;'
  endif

  assign border_style = ''
  if block.settings.border_width > 0
    assign border_style = 'border:' | append: block.settings.border_width | append: 'px solid ' | append: block.settings.border_color | append: ';'
  endif

  assign shadow_style = ''
  if block.settings.enable_shadow
    assign shadow_style = 'box-shadow:0 ' | append: block.settings.shadow_y | append: 'px ' | append: block.settings.shadow_blur | append: 'px rgba(0,0,0,0.15);'
  endif
%}

<div
  class="{{ card_classes }}"
  style="
    padding: {{ block.settings.padding }}px;
    {{ background_style }}
    {{ max_width_style }}
    border-radius: {{ block.settings.border_radius }}px;
    {{ border_style }}
    {{ shadow_style }}
  "
  {{ block.shopify_attributes }}
>
  {% content_for 'blocks' %}
</div>

{% style %}
.content-card-block {
  display: contents;
}

.content-card {
  width: 100%;
  transition: all 0.3s ease;
}
{% endstyle %}
{% schema %}
{
  "name": "Content Card",
  "class": "content-card-block",
  "blocks": [
    { "type": "text" },
    { "type": "richtext" },
    { "type": "image" },
    { "type": "button" },
    { "type": "promo" },
    { "type": "newsletter" }
  ],
  "settings": [

    {
      "type": "header",
      "content": "Spacing"
    },
    {
      "type": "range",
      "id": "padding",
      "label": "Padding",
      "default": 40,
      "min": 0,
      "max": 200,
      "step": 2,
      "unit": "px"
    },

    {
      "type": "header",
      "content": "Background"
    },
    {
      "type": "select",
      "id": "background_type",
      "label": "Background type",
      "default": "none",
      "options": [
        { "value": "none", "label": "None" },
        { "value": "solid", "label": "Solid color" },
        { "value": "gradient", "label": "Gradient" }
      ]
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background color",
      "default": "#ffffff",
      "visible_if": "{{ block.settings.background_type == 'solid' }}"
    },
    {
      "type": "color_background",
      "id": "background_gradient",
      "label": "Background gradient",
      "default": "linear-gradient(180deg,#ffffff,#000000)",
      "visible_if": "{{ block.settings.background_type == 'gradient' }}"
    },

    {
      "type": "header",
      "content": "Width Control"
    },
    {
      "type": "checkbox",
      "id": "enable_max_width",
      "label": "Enable max width",
      "default": false
    },
    {
      "type": "number",
      "id": "max_width_value",
      "label": "Max width value",
      "default": 800,
      "visible_if": "{{ block.settings.enable_max_width }}"
    },
    {
      "type": "select",
      "id": "max_width_unit",
      "label": "Width unit",
      "default": "px",
      "options": [
        { "value": "px", "label": "px" },
        { "value": "%", "label": "%" }
      ],
      "visible_if": "{{ block.settings.enable_max_width }}"
    },

    {
      "type": "header",
      "content": "Border"
    },
    {
      "type": "range",
      "id": "border_radius",
      "label": "Border radius",
      "default": 0,
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "border_width",
      "label": "Border width",
      "default": 0,
      "min": 0,
      "max": 10,
      "step": 1,
      "unit": "px"
    },
    {
      "type": "color",
      "id": "border_color",
      "label": "Border color",
      "default": "#000000",
      "visible_if": "{{ block.settings.border_width > 0 }}"
    },

    {
      "type": "header",
      "content": "Shadow"
    },
    {
      "type": "checkbox",
      "id": "enable_shadow",
      "label": "Enable shadow",
      "default": false
    },
    {
      "type": "range",
      "id": "shadow_y",
      "label": "Shadow vertical offset",
      "default": 10,
      "min": 0,
      "max": 50,
      "step": 1,
      "unit": "px",
      "visible_if": "{{ block.settings.enable_shadow }}"
    },
    {
      "type": "range",
      "id": "shadow_blur",
      "label": "Shadow blur",
      "default": 30,
      "min": 0,
      "max": 100,
      "step": 2,
      "unit": "px",
      "visible_if": "{{ block.settings.enable_shadow }}"
    },

    {
      "type": "header",
      "content": "Advanced"
    },
    {
      "type": "text",
      "id": "custom_class",
      "label": "Custom CSS class"
    }

  ],
  "presets": [
    {
      "name": "Content Card",
      "category": "Layout"
    }
  ]
}
{% endschema %}

