{% doc %}
  Renders a vertical stack of blocks.
  Mobile can be 1 or 2 columns.
  Desktop always shows 1 column.
{% enddoc %}

<div 
  class="layout-column mobile-cols-{{ block.settings.mobile_columns }}"
  style="
    padding: {{ block.settings.padding }}px;
    --column-gap: {{ block.settings.column_gap }}px;
    --align-items: {{ block.settings.align_items }};
    --justify-content: {{ block.settings.justify_content }};
  "
  {{ block.shopify_attributes }}
>
  {% content_for 'blocks' %}
</div>

{% style %}

/* ----------------------------------
   Base Layout (Desktop Default = 1 Column)
----------------------------------- */
.layout-column {
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--column-gap, 20px);

  align-items: var(--align-items, stretch);
  justify-content: var(--justify-content, start);
}

/* ----------------------------------
   Mobile Column Control
----------------------------------- */
@media (max-width: 767px) {

  .mobile-cols-2 {
    grid-template-columns: repeat(2, 1fr);
  }

  .mobile-cols-1 {
    grid-template-columns: 1fr;
  }

}

{% endstyle %}

{% schema %}
{
  "name": "Vertical Stack",
  "blocks": [{ "type": "content-card" }],
  "settings": [
    {
      "type": "select",
      "id": "mobile_columns",
      "label": "Columns on mobile",
      "default": "1",
      "options": [
        { "value": "1", "label": "1 Column" },
        { "value": "2", "label": "2 Columns" }
      ]
    },
    {
      "type": "range",
      "id": "column_gap",
      "label": "Space between items",
      "min": 0,
      "max": 50,
      "step": 5,
      "unit": "px",
      "default": 15
    },
    {
      "type": "select",
      "id": "align_items",
      "label": "Vertical alignment",
      "default": "stretch",
      "options": [
        { "value": "start", "label": "Top" },
        { "value": "center", "label": "Middle" },
        { "value": "end", "label": "Bottom" },
        { "value": "stretch", "label": "Stretch" }
      ]
    },
    {
      "type": "select",
      "id": "justify_content",
      "label": "Horizontal alignment",
      "default": "start",
      "options": [
        { "value": "start", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "end", "label": "Right" }
      ]
    },
    {
      "type": "range",
      "id": "padding",
      "label": "Section padding",
      "default": 0,
      "min": 0,
      "max": 200,
      "step": 5,
      "unit": "px"
    }
  ],
  "presets": [
    {
      "name": "Vertical Stack",
      "category": "Layout"
    }
  ]
}
{% endschema %}
