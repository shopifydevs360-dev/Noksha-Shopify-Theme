{% doc %}
  Contact Form Block
{% enddoc %}

<div class="contact-form-block" {{ block.shopify_attributes }}>

  {% form 'contact', id: 'ContactForm-' | append: block.id %}

    {% if form.posted_successfully? %}
      <div class="form-success">
        {{ block.settings.success_message }}
      </div>
    {% endif %}

    {{ form.errors | default_errors }}

    <div class="contact-form__fields">

      {% if block.settings.show_name %}
        <div class="field">
          <input
            type="text"
            name="contact[name]"
            placeholder="{{ block.settings.name_label }}"
            {% if block.settings.name_required %}required{% endif %}
          >
        </div>
      {% endif %}

      {% if block.settings.show_email %}
        <div class="field">
          <input
            type="email"
            name="contact[email]"
            placeholder="{{ block.settings.email_label }}"
            {% if block.settings.email_required %}required{% endif %}
          >
        </div>
      {% endif %}

      {% if block.settings.show_phone %}
        <div class="field">
          <input
            type="tel"
            name="contact[phone]"
            placeholder="{{ block.settings.phone_label }}"
          >
        </div>
      {% endif %}

      {% if block.settings.show_subject %}
        <div class="field">
          <input
            type="text"
            name="contact[subject]"
            placeholder="{{ block.settings.subject_label }}"
          >
        </div>
      {% endif %}

      {% if block.settings.show_message %}
        <div class="field">
          <textarea
            name="contact[body]"
            rows="5"
            placeholder="{{ block.settings.message_label }}"
            {% if block.settings.message_required %}required{% endif %}
          ></textarea>
        </div>
      {% endif %}

      {% if block.settings.enable_terms_checkbox %}
        <div class="field checkbox-field">
          <label>
            <input type="checkbox" required>
            {{ block.settings.terms_label }}
          </label>
        </div>
      {% endif %}

      <div class="field">
        <button type="submit" class="btn {{ block.settings.button_style }}">
          {{ block.settings.button_text }}
        </button>
      </div>

    </div>

  {% endform %}

</div>

{% style %}
.contact-form-block .contact-form__fields {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.contact-form-block input,
.contact-form-block textarea {
  width: 100%;
  padding: 12px 14px;
  border: 1px solid #ddd;
  border-radius: 4px;
  font-size: 14px;
}

.contact-form-block textarea {
  resize: vertical;
}

.contact-form-block .checkbox-field {
  display: flex;
  align-items: center;
  gap: 8px;
}

.contact-form-block .form-success {
  margin-bottom: 16px;
  color: green;
}
{% endstyle %}

{% schema %}
{
  "name": "Contact form",
  "settings": [

    {
      "type": "text",
      "id": "success_message",
      "label": "Success message",
      "default": "Thank you for contacting us."
    },

    {
      "type": "header",
      "content": "Name field"
    },
    {
      "type": "checkbox",
      "id": "show_name",
      "label": "Show name",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "name_required",
      "label": "Name required",
      "default": true,
      "visible_if": "{{ block.settings.show_name }}"
    },
    {
      "type": "text",
      "id": "name_label",
      "label": "Name placeholder",
      "default": "Your name",
      "visible_if": "{{ block.settings.show_name }}"
    },

    {
      "type": "header",
      "content": "Email field"
    },
    {
      "type": "checkbox",
      "id": "show_email",
      "label": "Show email",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "email_required",
      "label": "Email required",
      "default": true,
      "visible_if": "{{ block.settings.show_email }}"
    },
    {
      "type": "text",
      "id": "email_label",
      "label": "Email placeholder",
      "default": "Your email",
      "visible_if": "{{ block.settings.show_email }}"
    },

    {
      "type": "header",
      "content": "Phone field"
    },
    {
      "type": "checkbox",
      "id": "show_phone",
      "label": "Show phone",
      "default": false
    },
    {
      "type": "text",
      "id": "phone_label",
      "label": "Phone placeholder",
      "default": "Phone number",
      "visible_if": "{{ block.settings.show_phone }}"
    },

    {
      "type": "header",
      "content": "Subject field"
    },
    {
      "type": "checkbox",
      "id": "show_subject",
      "label": "Show subject",
      "default": false
    },
    {
      "type": "text",
      "id": "subject_label",
      "label": "Subject placeholder",
      "default": "Subject",
      "visible_if": "{{ block.settings.show_subject }}"
    },

    {
      "type": "header",
      "content": "Message field"
    },
    {
      "type": "checkbox",
      "id": "show_message",
      "label": "Show message",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "message_required",
      "label": "Message required",
      "default": true,
      "visible_if": "{{ block.settings.show_message }}"
    },
    {
      "type": "text",
      "id": "message_label",
      "label": "Message placeholder",
      "default": "Write your message",
      "visible_if": "{{ block.settings.show_message }}"
    },

    {
      "type": "header",
      "content": "Terms"
    },
    {
      "type": "checkbox",
      "id": "enable_terms_checkbox",
      "label": "Enable terms checkbox",
      "default": false
    },
    {
      "type": "text",
      "id": "terms_label",
      "label": "Terms label",
      "default": "I agree to the terms",
      "visible_if": "{{ block.settings.enable_terms_checkbox }}"
    },

    {
      "type": "header",
      "content": "Button"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button text",
      "default": "Send message"
    },
    {
      "type": "select",
      "id": "button_style",
      "label": "Button style",
      "options": [
        { "value": "btn--primary", "label": "Primary" },
        { "value": "btn--secondary", "label": "Secondary" },
        { "value": "btn--underline", "label": "Underline" }
      ],
      "default": "btn--primary"
    }

  ],
  "presets": [
    {
      "name": "Contact form"
    }
  ]
}
{% endschema %}
